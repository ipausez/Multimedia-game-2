<!DOCTYPE HTML>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <title>space</title>
    <script type="text/javascript" src="simpleGame.js"></script>
    <style>
        /* ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ */
        body,
        html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: black;
        }

        /* ‚úÖ ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏° */
        #game-container {
            position: relative;
            width: 1280px;
            height: 720px;
            overflow: hidden;
        }

        /* ‚úÖ ‡πÉ‡∏´‡πâ Canvas ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
        canvas {
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>

<body onload="init()">

    <!-- ‚úÖ ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏° -->
    <div id="game-container"></div>

    <script type="text/javascript">
        var ship;
        var game;
        var enemies = [];
        var bullets = [];
        var enemyBullets = []; // ‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡∏Ç‡∏≠‡∏á‡∏®‡∏±‡∏ï‡∏£‡∏π
        var frameCount = 0;
        let dragonFrames = [
            "enemy/dragon/frame_1.png",
            "enemy/dragon/frame_2.png",
            "enemy/dragon/frame_3.png",
            "enemy/dragon/frame_4.png"
        ];

        function Spaceship() {
            let flyImages = ["player/Fly (1).png", "player/Fly (2).png"];
            let shootImages = [
                "player/Shoot (1).png", "player/Shoot (2).png",
                "player/Shoot (3).png", "player/Shoot (4).png",
                "player/Shoot (5).png"
            ];
            let currentFrame = 0;
            let isShooting = false;

            tShip = new Sprite(game, flyImages[currentFrame], 80, 55);
            tShip.setSpeed(0);
            tShip.setImgAngle(90);
            tShip.setPosition(game.width / 6, game.height / 2);

            tShip.checkKeys = function () {
                if (keysDown[65]) this.setX(this.x - 6);
                if (keysDown[68]) this.setX(this.x + 6);
                if (keysDown[87]) this.setY(this.y - 6);
                if (keysDown[83]) this.setY(this.y + 6);

                // ‡∏¢‡∏¥‡∏á‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô
                if (keysDown[32]) {
                    isShooting = true;
                    if (frameCount % 5 === 0) {
                        shootBullet();
                    }
                } else {
                    isShooting = false;
                }

                this.setX(Math.max(50, Math.min(this.x, game.width - 50)));
                this.setY(Math.max(50, Math.min(this.y, game.height - 50)));
            };

            tShip.animate = function () {
                if (isShooting) {
                    let frameIndex = Math.floor(frameCount / 5) % shootImages.length;
                    this.image.src = (shootImages[frameIndex]);
                } else {
                    if (frameCount % 10 === 0) {
                        currentFrame = (currentFrame + 1) % flyImages.length;
                        this.image.src = (flyImages[currentFrame]);
                    }
                }
            };

            return tShip;
        }

        class Dragon {
            constructor(x, y, speed) {
                this.sprite = new Sprite(game, "enemy/flying_dragon-red.png", 191, 161);
                this.sprite.setSpeed(0);
                this.sprite.setPosition(x, y);
                this.speed = 2;
                this.frameIndex = 0; // ‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏ü‡∏£‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                this.framesX = 3; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ü‡∏£‡∏°‡πÉ‡∏ô‡πÅ‡∏Å‡∏ô X
                this.framesY = 4; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ü‡∏£‡∏°‡πÉ‡∏ô‡πÅ‡∏Å‡∏ô Y
                this.frameWidth = 191; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏ü‡∏£‡∏°
                this.frameHeight = 161;
                this.totalFrames = this.framesX * this.framesY; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ü‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (12)
                this.direction = 0; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á (0 = ‡∏Ç‡∏ß‡∏≤, 1 = ‡πÄ‡∏â‡∏µ‡∏¢‡∏á, 2 = ‡∏ã‡πâ‡∏≤‡∏¢, 3 = ‡∏ö‡∏¥‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô)
            }

            update() {
                this.move();
                this.animate();
            }

            move() {
                let dx = ship.x - this.sprite.x;
                let dy = ship.y - this.sprite.y;
                let angle = Math.atan2(dy, dx);

                this.sprite.setX(this.sprite.x + Math.cos(angle) * this.speed);
                this.sprite.setY(this.sprite.y + Math.sin(angle) * this.speed);

                // ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏à‡∏≤‡∏Å spritesheet
                if (Math.abs(dx) > Math.abs(dy)) {
                    // ‡∏ö‡∏¥‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
                    this.direction = dx > 0 ? 1 : 3; // ‡∏Ç‡∏ß‡∏≤ = 0, ‡∏ã‡πâ‡∏≤‡∏¢ = 2
                } else {
                    // ‡∏ö‡∏¥‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏â‡∏µ‡∏¢‡∏á
                    this.direction = dy < 0 ? 0 : 2; // ‡∏Ç‡∏∂‡πâ‡∏ô = 3, ‡πÄ‡∏â‡∏µ‡∏¢‡∏á‡∏•‡∏á = 1
                }
            }

            animate() {
                if (frameCount % 5 === 0) { // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏ü‡∏£‡∏°‡∏ó‡∏∏‡∏Å 5 ‡πÄ‡∏ü‡∏£‡∏°
                    this.frameIndex = (this.frameIndex + 1) % this.framesX; // ‡∏´‡∏°‡∏∏‡∏ô‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏ñ‡∏ß
                }

                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏ü‡∏£‡∏°‡∏à‡∏≤‡∏Å spritesheet
                let frameX = this.frameIndex * this.frameWidth;
                let frameY = this.direction * this.frameHeight; // ‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÇ‡∏î‡∏¢‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á

                // ‡∏ï‡∏±‡∏î‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å spritesheet ‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏î‡∏•‡∏á canvas
                game.context.drawImage(
                    this.sprite.image,
                    frameX, frameY, // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á x, y ‡πÉ‡∏ô spritesheet
                    this.frameWidth, this.frameHeight, // ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏ü‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏î
                    this.sprite.x - this.frameWidth / 2, this.sprite.y - this.frameHeight / 2, // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏°‡∏±‡∏á‡∏Å‡∏£‡πÉ‡∏ô‡πÄ‡∏Å‡∏°
                    this.frameWidth, this.frameHeight
                );
            }
        }

        class Bullet {
            constructor(x, y) {
                this.sprite = new Sprite(game, "weapon/machine-gun-bullet.png", 15, 30);
                this.sprite.setSpeed(15);
                this.sprite.setPosition(x, y);
                this.sprite.setImgAngle(180);
                this.sprite.setMoveAngle(90);
            }

            update() {
                this.sprite.update();

                // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á
                if (this.sprite.x > game.width + this.sprite.width) {
                    let index = bullets.indexOf(this);
                    if (index > -1) {
                        bullets.splice(index, 1);
                    }
                }
            }
        }

        // üöÄ ‡∏¢‡∏¥‡∏á‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô
        function shootBullet() {
            let bullet = new Bullet(ship.x + 20, ship.y + 15);
            bullets.push(bullet);
        }

        // üöÄ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô
        function updateBullets() {
            for (let i = bullets.length - 1; i >= 0; i--) {
                bullets[i].update();

                // ‚úÖ ‡∏ñ‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏∂‡∏á‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏ß‡∏≤‡∏Ç‡∏≠‡∏á‡∏à‡∏≠ (‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡πà‡∏≤‡∏á 30px) ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏Ç‡∏≠‡∏ö
                if (bullets[i].sprite.x > game.width - 30) {
                    bullets.splice(i, 1);
                }
            }
        }

        class EnemyBullet {
            constructor(x, y) {
                this.sprite = new Sprite(game, "weapon/Shot5/shot5_asset.png", 120, 80);
                this.sprite.setSpeed(8);
                this.sprite.setPosition(x, y);
                this.sprite.setImgAngle(270);
                this.sprite.setMoveAngle(270); // ‡∏¢‡∏¥‡∏á‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á
            }

            update() {
                this.sprite.update();

                // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á
                if (this.sprite.x > game.width - this.sprite.width) {
                    let index = enemyBullets.indexOf(this);
                    if (index > -1) {
                        enemyBullets.splice(index, 1);
                    }
                }
            }
        }

        // ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡∏¢‡∏¥‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ sprite ‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÅ‡∏ô‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á sprite)
        function isAlignedVertically(enemy) {
            let enemyTop = enemy.y - enemy.height / 2;
            let enemyBottom = enemy.y + enemy.height / 2;
            let playerTop = ship.y - ship.height / 2;
            let playerBottom = ship.y + ship.height / 2;

            return (
                (playerTop >= enemyTop && playerTop <= enemyBottom) || // ‡∏Ç‡∏≠‡∏ö‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏®‡∏±‡∏ï‡∏£‡∏π
                (playerBottom >= enemyTop && playerBottom <= enemyBottom) || // ‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏®‡∏±‡∏ï‡∏£‡∏π
                (enemyTop >= playerTop && enemyBottom <= playerBottom) // ‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
            );
        }

        // ‚úÖ ‡∏¢‡∏¥‡∏á‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡∏®‡∏±‡∏ï‡∏£‡∏π‡πÅ‡∏ö‡∏ö‡πÄ‡∏ß‡πâ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏∏‡πà‡∏°
        function enemyShootBullet(enemy) {
            if (isAlignedVertically(enemy) && frameCount - enemy.lastShotFrame > enemy.shootDelay) {
                let bullet = new EnemyBullet(enemy.x, enemy.y);
                enemyBullets.push(bullet);
                enemy.lastShotFrame = frameCount; // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å frame ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏¢‡∏¥‡∏á‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô
            }
        }

        // ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡∏®‡∏±‡∏ï‡∏£‡∏π
        function updateEnemyBullets() {
            for (let i = enemyBullets.length - 1; i >= 0; i--) {
                enemyBullets[i].update();
            }
        }

        function Enemy(x, y, type, speed) {
            // let spriteMap = {
            //     1: "enemy/enemy-ship.png",
            //     2: "enemy/enemy-spaceship.png",
            //     3: "enemy/flying_dragon-red.png" // ‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏û‡∏°‡∏±‡∏á‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î
            // };

            // let currentFrame = 0;

            let e;
            if (type === 3) {
                e = new Dragon(x, y, speed); // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏ó‡∏µ‡πà 3 ‡πÉ‡∏ä‡πâ‡∏°‡∏±‡∏á‡∏Å‡∏£
            } else {
                let spriteMap = {
                    1: "enemy/enemy-ship.png",
                    2: "enemy/enemy-spaceship.png"
                };
                e = new Sprite(game, spriteMap[type], 50, 50);
                e.setSpeed(0);
                e.setPosition(x, y);
                e.setImgAngle(0);
                e.type = type;
                e.speed = speed;
                e.shootDelay = Math.floor(Math.random() * 100) + 80; // ‡∏¢‡∏¥‡∏á‡∏ó‡∏∏‡∏Å ‡πÜ 80-180 ‡πÄ‡∏ü‡∏£‡∏°
                e.lastShotFrame = 0; // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ü‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏¢‡∏¥‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
            }

            e.updateBehavior = function () {
                if (this.type === 1) {
                    this.setX(this.x - 2);
                } else if (this.type === 2) {
                    // ‚úÖ ‡πÉ‡∏´‡πâ‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó 2 ‡∏¢‡∏¥‡∏á‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á ‡πÅ‡∏ï‡πà‡∏°‡∏µ delay
                    enemyShootBullet(this);
                } else if (this.type === 3) {
                    // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏á‡∏Å‡∏£‡∏ö‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
                    let dx = ship.x - this.x;
                    let dy = ship.y - this.y;
                    let angle = Math.atan2(dy, dx);
                    this.setX(this.x + Math.cos(angle) * 2);
                    this.setY(this.y + Math.sin(angle) * 2);

                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏°‡∏±‡∏á‡∏Å‡∏£
                    if (frameCount % 10 === 0) {
                        currentFrame = (currentFrame + 1) % frameImages.length;
                        this.image.src = frameImages[currentFrame];
                    }
                }

                if (this.x < -50) {
                    let index = enemies.indexOf(this);
                    if (index > -1) {
                        enemies.splice(index, 1);
                    }
                }
            };

            return e;
        }


        function spawnEnemies(numEnemies) {
            let startX = ship.x + 300;
            let minY = 50;
            let maxY = game.height - 50;
            let xSpacing = 250;
            let ySpacing = 120;
            let maxRows = 4;

            for (let i = 0; i < numEnemies; i++) {
                let col = Math.floor(i / maxRows);
                let row = i % maxRows;

                let x = startX + col * xSpacing + (Math.random() * 50 - 25);
                let y = minY + row * ySpacing + (Math.random() * 50 - 25);

                let enemyType = Math.floor(Math.random() * 3) + 1;
                let enemySpeed = enemyType === 1 ? Math.random() * 4 + 1 : enemyType === 2 ? 0 : Math.random() * 5 + 3;

                let enemy = new Enemy(x, y, enemyType, enemySpeed);
                enemies.push(enemy);
            }
        }

        function init() {
            game = new Scene();
            game.setSize(1280, 720);

            // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° Background Video ‡πÉ‡∏ô Scene
            game.backgroundVideo = document.createElement("video");
            game.backgroundVideo.src = "background-video.mp4";
            game.backgroundVideo.autoplay = true;
            game.backgroundVideo.loop = true;
            game.backgroundVideo.muted = true;
            game.backgroundVideo.play();

            // ‚úÖ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Canvas ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô #game-container
            document.getElementById("game-container").appendChild(game.canvas);

            // üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏¢‡∏≤‡∏ô‡∏≠‡∏ß‡∏Å‡∏≤‡∏®
            ship = new Spaceship();

            // üõ∏ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏®‡∏±‡∏ï‡∏£‡∏π
            spawnEnemies(15);

            game.start();
        }

        function update() {
            game.clear();

            // ‚úÖ ‡∏ß‡∏≤‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
            game.context.drawImage(game.backgroundVideo, 0, 0, game.width, game.height);

            ship.checkKeys();
            ship.animate();
            ship.update();

            // ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô
            updateBullets();

            // ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡∏Ç‡∏≠‡∏á‡∏®‡∏±‡∏ï‡∏£‡∏π
            updateEnemyBullets();

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß
            for (let enemy of enemies) {
                enemy.updateBehavior();
                enemy.update();
            }

            frameCount++;
        }

    </script>

</body>

</html>